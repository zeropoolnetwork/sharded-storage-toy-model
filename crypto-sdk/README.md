# Crypto SDK for Sharded Storage Toy Example

This library implements the cryptographic operations used by Sharded Storage Toy Example.

## Building

This library depends on WASM module in `../poseidon2-bn256/`,
  which implements fast poseidon2 calculation.
Make sure you build it (with `wasm-pack build`) before using crypto-sdk.

To build crypto-sdk: `pnpm tsc`.

To test crypto-sdk: `pnpm test`. (`poseidon2-bn256` in this case must be built with `wasm-pack build --target nodejs`.)

## Runtime Dependencies

To run snark prover, crypto-sdk directly calls `nargo prove` external tool.
It requires Nargo (version 0.30) to be installed and the contents of `../circuits/` to be available.

## Noir Definitions

The `src/noir_codegen/` directory contains structure definitions autogenerated from Noir code in `../circuits/`.
We currently store them in Git to avoid reproducibility issues.
To re-generate them (in case `../circuits/` changes), do the following:

1. Generate `../circuits/export/main.json` file with Noir circuit description.
   For that, run the appropriate Nargo command from `../circuits/` (usually `nargo export`).

2. Generate TypeScript bindings from `../circuits/export/main.json`:
     `pnpm noir-gen-circuits`.
